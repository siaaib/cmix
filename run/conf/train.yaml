# ---------- Overriding hydra default configs ----------
hydra:
  job:
    name: train
    chdir: true
  run:
    dir: ${dir.output_dir}/${hydra.job.name}/${exp_name}/single
  sweep:
    dir: ${dir.output_dir}/${hydra.job.name}/${exp_name}
    subdir: run${hydra.job.num}

defaults:
  - _self_
  - dir: local
  - dataset: seg
  - model: SpecTr
  - feature_extractor: WAVELSTMFeatureExtractor #LSTMFeatureExtractor #
  - decoder: TransformerCNNDecoder #UNet1DDecoder #SAKTModel # UNet1DDecoderTransformer# # #UNet1DDecoder
  - split: fold_0

seed: 42
exp_name: dummy
batch_size: 32
num_workers: 24
duration: 17280 #8640 duration * 5 
downsample_rate: 2
upsample_rate: 1

# training
trainer:
  epochs: 50
  accelerator: auto
  use_amp: true
  debug: false
  gradient_clip_val: 1.0
  accumulate_grad_batches: 1
  monitor: val_score
  monitor_mode: max
  check_val_every_n_epoch: 1

aug:
  mixup_prob: 0.0
  mixup_alpha: 0.4
  cutmix_prob: 0.0
  cutmix_alpha: 0.4
  
# post_process
pp:
  score_th: 0.02
  distance: 10

# label
labels:
  - "awake"
  - "event_onset"
  - "event_wakeup"

# feature
features:
  - "minute"
  - "anglez"
  - "enmo"
  - "hour_sin"
  - "hour_cos"
  - "anglez_sin"
  - "anglez_cos"
  - "anglez_diff_p1"
  - "anglez_diff_p2"
  - "anglez_diff_p3"
  - "anglez_diff_p4"
  - "enmo_diff_p1"
  - "enmo_diff_p2"
  - "enmo_diff_p3"
  - "enmo_diff_p4"
  - "anglez_diff_rolling_med_60"
  - "anglez_diff_rolling_mean_60"
  - "anglez_diff_rolling_max_60"
  - "anglez_diff_rolling_min_60"
  - "anglez_diff_rolling_std_60"
  - "anglez_diff_rolling_quantile_25_60"
  - "anglez_diff_rolling_quantile_975_60"
  - "enmo_diff_rolling_med_60"
  - "enmo_diff_rolling_mean_60"
  - "enmo_diff_rolling_max_60"
  - "enmo_diff_rolling_min_60"
  - "enmo_diff_rolling_max_min_60"
  - "enmo_diff_rolling_std_60"
  - "enmo_diff_rolling_quantile_25_60"
  - "enmo_diff_rolling_quantile_975_60"
# optimizer
optimizer:
  lr: 0.0005

# scheduler
scheduler:
  num_warmup_steps: 10